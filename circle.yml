machine:
  environment:
    LISP: sbcl
    PATH: ~/.roswell/bin:$PATH

checkout:
  pre:
    - curl -L https://raw.githubusercontent.com/snmsts/roswell/master/scripts/install-for-ci.sh | sh

dependencies:
  pre:
    - ros install qlot
    - ros install prove

  override:
    - if [ -e qlfile ]; then qlot install; fi;
    - echo "(ros:ignore-shebang)" >> ~/.roswell/init.lisp

  cache_directories:
    - ~/.roswell
    - quicklisp

test:
  override:
    - ros run -- --version
    - run-prove clake-test.asd
