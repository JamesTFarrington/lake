# Clake - Clake is a [Rake](https://github.com/ruby/rake)-like program implemented in Common Lisp.
[![Build Status](https://circleci.com/gh/Rudolph-Miller/clake.svg?style=shield)](https://circleci.com/gh/Rudolph-Miller/clake)

## API

See [Document](https://rudolph-miller.github.io/clake/overview.html).  
This HTML is generated by [Codex](https://github.com/CommonDoc/codex).


## API design exploration

Here shows some API design examples.

    ;; Do the default task for CLAKEFILE in the current directory.
    (clake:clake)
    
    ;; Do a task specifying its name for CLAKEFILE in the current directory.
    (clake:clake :hello)

## CLAKEFILE design exploration

Here shows what and how CLAKEFILE should express.

    ;; A target that print hello.
    (clake:deftarget "hello" ()
      (print "do task hello!")
      (terpri))

    ;; Targets that build an executable with depencency.
    (defparameter cc "gcc")

    (clake:deftarget "hello" ("hello.o" "message.o")
      (sh #?"#{cc} -o hello hello.o message.o"))

    (clake:deftarget "hello.o" ("hello.c")
      (sh #?"#{cc} -c hello.c"))

    (clake:deftarget "message.o" ("message.c")
      (sh #?"#{cc} -c message.c"))

    (clake:deftarget "clean" () :phony t
      (sh "rm -f hello hello.o message.o"))

    ;; The "all" target.
    (clake:deftarget "all" ("hello" "som") :phony t)
    
    (clake:deftarget "hello" ("hello.c")
      (sh #?"#{cc} -o hello hello.c"))

    (clake:deftarget "som" ("som.c")
      (sh #?"#{cc} -o som som.c"))

## Design requirements
- dynamic task definition
- expected number of tasks in a CLAKEFILE is ~100
- up-to-date check
- duplicated target names allowed, executed respectively

## Author

* Rudolph Miller (chopsticks.tk.ppfm@gmail.com)

## Copyright

Copyright (c) 2015 Rudolph Miller (chopsticks.tk.ppfm@gmail.com)

## License

Licensed under the MIT License.
